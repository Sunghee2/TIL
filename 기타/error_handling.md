# error handling

![img](http://www.nextree.co.kr/content/images/2016/09/Exception-Class.png)



1. Error / Exception

   - Error : 시스템 레벨에서 발생한 심각한 오류로 미리 예측할 수 없고 발생하면 프로그램의 비정상적인 종료를 막을 수 없습니다.

     => try / catch로 잡아도 할 수 있는게 없으므로 신경쓰지 않아도 됩니다.

   - Exception : 프로그램 코드에 의해서 수습될 수 있는 미약한 오류로 발생하더라도 대응하는 코드를 미리 작성하면 프로그램의 비정상적인 종료를 막을 수 있습니다.

2. Checked Exception / Unchecked Exception

   Java에서 Exception은 Exception(Compile Time Exception)과 RuntimeException로 나눌 수 있습니다. 또, Exception은 RuntionException과 RuntimeException이 아닌 클래스로 구분됩니다. Unchecked Exception는 RuntimeException을 상속하고 Checked Exception는 RuntimeException을 상속하지 않는다.

   - Checked Exception(Compile Time Exception) : 컴파일 단계에서 확인할 수 있는 예외

     - 반드시 예외를 처리해야합니다(예외처리하지 않으면 컴파일 에러).

     - Runtime Exception을 제외한 모든 Exception

     - Compile Time Exception 

       - 컴파일할 때 발생하는 예외로 주로 외부의 영향(사용자들의 동작, 환경 등)으로 발생한다. (개발자 의도와는 상관없이 예상치 못한 곳에서 예외가 발생)

       - ex) 존재하지 않는 파일 처리, 메소드나 클래스가 존재하지 않음, 입력한 데이터 형식이 잘못됨 등

   - Unchecked Exception(Runtime Exception) : 컴파일 단계에서 확인할 수 없는 예외

     - 디버깅 등으로 해결할 수 있어 반드시 예외 처리하지 않아도 됩니다.

       > ex) ArithmeticException을 try/catch로도 처리하는 것보다 0으로 나누지 않도록 프로그램을 변경하는 것이 좋음.

     - 실행 단계에서 예외를 확인할 수 있습니다.

     - Runtime Exception

       - 실행할 때 발생하는 예외로 예외때문에 더 동작하지 않고 실행을 멈추게 됩니다. 

       - 주로 프로그래머의 실수에 의해 발생합니다.

       - ex) 배열의 범위를 벗어남, 정수를 0으로 나눔, null 객체의 메소드나 멤버변수에 접근 등

3. 예외 처리

   - 예외 복구

     - 정의 : 프로그램 실행시 발생할 수 있는 예외에 대비한 코드를 작성하는 것을 의미합니다.

     - 목적 : 프로그램의 비정상 종료를 막고, 정상적인 실행상태를 유지하도록 합니다.

     - 적절하게 복구되거나 작업을 중단시키고 통보해야합니다.

     - try / catch

       - 언제 try / catch를 써야하나?

         - checked exception 

           개발자가 부주의해서 생기는 에러는 try/catch가 아닌 직접 디버깅해야합니다.

           > 예를 들어, 사용자가 존재하지 않는 파일을 입력한 경우(사용자의 실수) try/catch를 통해 잘못 입력했다고 알려줍니다. (Try/ catch를 통해 지나치게 기술적인 에러를 사용자가 이해할 수 있는 메시지로 바꿔줄 수 있습니다.)

         - 예외를 처리할 의미있는 방법이 있는 경우에 사용합니다. (단순히 기록할 용도 x)

           > 로깅은 호출 스택 최상위 수준에서 처리하는 것이 좋습니다.

       - 쿼리 요청시에 try / catch를 써야할까?

         쿼리 요청시에 에러가 나는 경우를 나눠보았습니다.

         - 쿼리 문법 오류, 제약조건 위반 => 개발자가 코드를 다시 고쳐야합니다.
         - DB 연결 에러, 서버끊김 => 이미 쿼리 전에 확인되어 처리(계속 디비 연결 요청)되거나 코드상으로 복구할 수 없는 에러입니다.

       - try / catch 범위가 너무 넓으면

         - catch한 예외를 어디서 던졌는지 추적하기 힘듭니다.
         - 유지보수하기 힘들고 코드 파악이 어려워집니다.
         - 여러 곳에서 같은 예외를 던지고 처리 방법이 달라야 하는 경우 처리하지 못합니다.

   - 예외 발생 : throws를 통해 호출한 쪽으로 예외를 던지고 그 처리를 회피하는 경우입니다. 호출한 쪽에서 다시 예외를 받아 처리하도록 하거나, 해당 메소드에서 이 예외를 던지는 것이 최선의 방법이라는 확신이 있을 때만 사용해야 합니다.

     - throw new Error(message) - 콜스택에서 `catch`가 걸쳐 있는 블록으로 에러 객체가 전달됨. 콜스택의 어떤 함수에서도 에러를 처리하지 않으면 처리되지 않은 에러로 인해 최악의 경우에는 프로그램이 강제 종료됨
     - 객체를 잘못 사용하는 사용자에게 예외를 강제로 발생시켜서 주의를 줄 수 있음

   - 예외 전환 : 예외를 잡아서 다른 예외를 던지는 경우입니다. 호출한 쪽에서 예외를 받을 때 예외를 쉽게 식별할 수 있도록 돕기 위한 방법입니다. (어떤 예외인지 분명해야 처리가 수월해지기 때문)
